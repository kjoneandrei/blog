---
layout: post
title: Bugsnag for Vapor 3
date: 2019-01-31 10:00:00
tags: server,bugsnag,report,reporting,release
authorIds:
- brto
categories:
- Vapor
---

<p class="date">2019-01-31 10:00:00</p>
<p>At Nodes we have been working hard on a Vapor 3 provider for <a href="https://www.bugsnag.com">Bugsnag</a>. Bugsnag is a reporting tool that we use extensively to help catch and fix bugs.</p>
<p>In the new version of the library, weâ€™ve been able to remove a lot of dead code, simplify the API and add support for breadcrumbs.</p>
<h2 id="migration-to-vapor-3">Migration to Vapor 3</h2>
<p>The migration from Vapor 2 to Vapor 3 was a relatively easy one for Bugsnag. The major changes were the use of <code>Codable</code> and the introduction of <code>Future</code>s.</p>
<p>One of the double-edged-swords of Vapor 3 is the asynchronous design. The asynchronous nature of the framework makes stack traces virtually useless. Sadly, we had to remove support for <a href="https://github.com/nodes-vapor/stack">Stack</a> and stack traces.</p>
<p>Registration has seen an update as well. It now uses the <code>Service</code> system.</p>
<pre class="swift"><code>let reporter = BugsnagReporter(
    apiKey: &quot;&lt;YOUR BUGSNAG API KEY&gt;&quot;,
    releaseStage: environment.name,
    shouldReport: environment.name != &quot;local&quot;
    debug: false
)</code></pre>
<p>With a newly simplified API, we introduced support for severities.</p>
<pre class="swift"><code>reporter.info(...)
reporter.warning(...)
reporter.error(...)</code></pre>
<p>After the migration to Vapor 3, we updated the Bugsnag payload version from 2 to 4. This allows us to support newer features as well as silence warnings about deprecated APIs.</p>
<h2 id="breadcrumbs">Breadcrumbs</h2>
<p>After many feature requests, we have now integrated breadcrumbs into the latest version. Breadcrumb is a feature that helps ease the debugging process by enabling a user to attach data to the life-cycle of a request. To drop a breadcrumb just use the convenience function on <code>Request</code>.</p>
<pre class="swift"><code> req.breadcrumb(
     name: &quot;Something happened!&quot;,
     type: .manual,
     metadata: [&quot;foo&quot;: &quot;bar&quot;]
 )</code></pre>
<p>If you are curious about Bugsnag and would like to know more or try it out, be sure to checkout the <a href="https://github.com/nodes-vapor/bugsnag">repo on Github</a>.</p>
